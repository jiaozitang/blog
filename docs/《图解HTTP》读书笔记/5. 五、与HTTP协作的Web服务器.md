## 用单台虚拟主机实现多个域名

## 通信数据转发程序：代理、网关、隧道

代理
代理是一种有转发功能的应用程序，它扮演了位于服务器和客户端“中间人”的角色，接收由客户端发送的请求并转发给服务器，同时也接收服务器返回的响应并转发给客户端

网关
网关是转发其他服务器通信数据的服务端，接收从客户端发送来的请求时，它就像自己拥有资源的源服务器一样对请求进行处理

隧道
隧道是在相隔甚远的客户端和服务器两者之间进行中转，并保持双方通信连接的应用程序

### 代理

代理服务器的基本行为就是接收客户端发送的请求后转发给其他服务器

代理不改变请求 URI，会直接发送给前方持有资源的目标服务器

持有资源实体的服务器被称为源服务器

从源服务器返回的响应经过代理服务器后再传给客户端

在 HTTP 通信过程中，可级联多台代理服务器

请求和响应的转发会经过数台类似锁链一样连接起来的代理服务器

转发时，需要附加 Via 首部字段以标记出经过的主机信息

使用代理服务器的理由：利用缓存技术减少网络带宽的流量，组织内部针对特定网站的访问控制，以获取访问日志为主要目的

#### 缓存代理

代理转发响应时，缓存代理 caching proxy 会预先将资源的副本保存在代理服务器上

当代理再次接收到对相同资源的请求时，就可以不从源服务器那里获取资源，而是将之前缓存的资源作为响应返回

#### 透明代理

转发请求或响应时，不对报文做任何加工的代理类型被称为透明代理

### 网关

利用网关可以由HTTP请求转化为其他协议通信

### 隧道

隧道可按要求建立起一条与其他服务器的通信线路，届时使用SSL等加密手段进行通信

隧道的目的是确保客户端能与服务器进行安全的通信

隧道本身不会去解析HTTP请求

通过隧道的传输，可以和远距离的服务器安全通信

隧道本身是透明的，客户端不用在意隧道的存在

## 保存资源的缓存

缓存是指代理服务器或客户端本地磁盘内保存的资源副本，利用缓存可减少对源服务器的方法，也就节省； 通信流量和通信时间

缓存服务器是代理服务器的一种，并归类在缓存代理类型中

当代理转发从服务器返回的响应时，代理服务器将会保存一份资源的副本

缓存服务器的优势在于利用缓存可以避免多次从源服务器转发资源

客户端可以就近从缓存服务器上获取资源，而源服务器也不必多次处理相同的请求了

### 缓存的有效期限

### 客户端的缓存





